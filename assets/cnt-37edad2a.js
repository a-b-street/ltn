import{S as Ce,i as je,s as Le,x as I,aO as Se,aN as Ae,af as Ie,b as _,c as g,t as H,G as D,f as E,a5 as fe,j as B,a as w,g as c,H as O,l as _e,q as $,D as X,p as h,d as y,y as T,I as F,r as Ne,_ as De,ab as Oe,C as Y,e as we,as as ye,n as Fe,ac as Re,ay as Ge,aj as Be,h as Z,ar as Ee}from"./pico.conditional.jade.min-bd6791eb.js";const He="/ltn/assets/boundaries-772b6fb5.geojson";function pe(r,e,t){const n=r.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function he(r,e,t){const n=r.slice();return n[15]=e[t],n}function de(r,e,t){const n=r.slice();return n[18]=e[t],n}function ge(r,e,t){const n=r.slice();return n[18]=e[t],n}function Me(r){let e,t,n=I(r[2]),l=[];for(let o=0;o<n.length;o+=1)l[o]=$e(de(r,n,o));const i=o=>$(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=we()},m(o,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,a);w(o,e,a),t=!0},p(o,a){if(a&4){n=I(o[2]);let s;for(s=0;s<n.length;s+=1){const u=de(o,n,s);l[s]?(l[s].p(u,a),h(l[s],1)):(l[s]=$e(u),l[s].c(),h(l[s],1),l[s].m(e.parentNode,e))}for(Y(),s=n.length;s<l.length;s+=1)i(s);X()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)h(l[a]);t=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)$(l[a]);t=!1},d(o){o&&y(e),T(l,o)}}}function qe(r){let e,t,n=I(r[1]),l=[];for(let o=0;o<n.length;o+=1)l[o]=me(ge(r,n,o));const i=o=>$(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=we()},m(o,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,a);w(o,e,a),t=!0},p(o,a){if(a&2){n=I(o[1]);let s;for(s=0;s<n.length;s+=1){const u=ge(o,n,s);l[s]?(l[s].p(u,a),h(l[s],1)):(l[s]=me(u),l[s].c(),h(l[s],1),l[s].m(e.parentNode,e))}for(Y(),s=n.length;s<l.length;s+=1)i(s);X()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)h(l[a]);t=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)$(l[a]);t=!1},d(o){o&&y(e),T(l,o)}}}function Je(r){let e=r[18]+"",t;return{c(){t=H(e)},m(n,l){w(n,t,l)},p(n,l){l&4&&e!==(e=n[18]+"")&&Z(t,e)},d(n){n&&y(t)}}}function $e(r){let e,t,n,l;function i(){return r[8](r[18])}return t=new ye({props:{$$slots:{default:[Je]},$$scope:{ctx:r}}}),t.$on("click",i),{c(){e=_("li"),D(t.$$.fragment),n=g()},m(o,a){w(o,e,a),O(t,e,null),c(e,n),l=!0},p(o,a){r=o;const s={};a&8388612&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(o){l||(h(t.$$.fragment,o),l=!0)},o(o){$(t.$$.fragment,o),l=!1},d(o){o&&y(e),F(t)}}}function Pe(r){let e=r[18]+"",t;return{c(){t=H(e)},m(n,l){w(n,t,l)},p(n,l){l&2&&e!==(e=n[18]+"")&&Z(t,e)},d(n){n&&y(t)}}}function me(r){let e,t,n;function l(){return r[7](r[18])}return t=new ye({props:{$$slots:{default:[Pe]},$$scope:{ctx:r}}}),t.$on("click",l),{c(){e=_("li"),D(t.$$.fragment)},m(i,o){w(i,e,o),O(t,e,null),n=!0},p(i,o){r=i;const a={};o&8388610&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(i){n||(h(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){i&&y(e),F(t)}}}function ke(r){let e,t,n=r[15]+"",l;return{c(){e=_("p"),t=_("a"),l=H(n),E(t,"href",`index.html?project=ltn_cnt/${r[11]}/${r[15]}`)},m(i,o){w(i,e,o),c(e,t),c(t,l)},p:Fe,d(i){i&&y(e)}}}function be(r){let e,t,n,l,i=I(r[12]),o=[];for(let a=0;a<i.length;a+=1)o[a]=ke(he(r,i,a));return{c(){e=_("div"),t=_("h2"),t.textContent=`${r[11]}`,n=g();for(let a=0;a<o.length;a+=1)o[a].c();l=g(),E(e,"class","group")},m(a,s){w(a,e,s),c(e,t),c(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);c(e,l)},p(a,s){if(s&0){i=I(a[12]);let u;for(u=0;u<i.length;u+=1){const j=he(a,i,u);o[u]?o[u].p(j,s):(o[u]=ke(j),o[u].c(),o[u].m(e,l))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}},d(a){a&&y(e),T(o,a)}}}function Te(r){let e,t=r[10].name+"",n;return{c(){e=_("p"),n=H(t)},m(l,i){w(l,e,i),c(e,n)},p(l,i){i&1024&&t!==(t=l[10].name+"")&&Z(n,t)},d(l){l&&y(e)}}}function Ue(r){let e,t;return e=new Ee({props:{openOn:"hover",$$slots:{default:[Te,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:r}}}),{c(){D(e.$$.fragment)},m(n,l){O(e,n,l),t=!0},p(n,l){const i={};l&8389632&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function Ke(r){let e,t,n,l;return e=new Re({props:{filter:["==",["get","kind"],r[3]],paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Ge(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ue]},$$scope:{ctx:r}}}),e.$on("click",Qe),n=new Be({props:{filter:["==",["get","kind"],r[3]],paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels",manageHoverState:!0}}),{c(){D(e.$$.fragment),t=g(),D(n.$$.fragment)},m(i,o){O(e,i,o),w(i,t,o),O(n,i,o),l=!0},p(i,o){const a={};o&8&&(a.filter=["==",["get","kind"],i[3]]),o&8388608&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const s={};o&8&&(s.filter=["==",["get","kind"],i[3]]),n.$set(s)},i(i){l||(h(e.$$.fragment,i),h(n.$$.fragment,i),l=!0)},o(i){$(e.$$.fragment,i),$(n.$$.fragment,i),l=!1},d(i){i&&y(t),F(e,i),F(n,i)}}}function We(r){let e,t;return e=new Oe({props:{data:r[0],generateId:!0,$$slots:{default:[Ke]},$$scope:{ctx:r}}}),{c(){D(e.$$.fragment)},m(n,l){O(e,n,l),t=!0},p(n,l){const i={};l&1&&(i.data=n[0]),l&8388616&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ze(r){let e,t,n,l,i,o,a,s,u,j,d,U,C,N,x,M,m,b,ee,te,le,K,ne,q,oe,W,re,J,R,L,P,z,Q,ae;const ie=[qe,Me],S=[];function se(f,v){return f[3]=="LAD"?0:1}m=se(r),b=S[m]=ie[m](r);let G=I(ve()),p=[];for(let f=0;f<G.length;f+=1)p[f]=be(pe(r,G,f));return L=new Se({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${Ae}`,standardControls:!0,bounds:[-8.943,54.631,-.901,59.489],$$slots:{default:[We]},$$scope:{ctx:r}}}),L.$on("error",r[9]),z=Ie(r[5][0]),{c(){e=_("div"),t=_("div"),n=_("h2"),n.textContent="Connected Neighbourhoods Tool",l=g(),i=_("fieldset"),o=_("label"),a=_("input"),s=H(`
        Local Authority Districts`),u=g(),j=_("label"),d=_("input"),U=H(`
        Regions`),C=g(),N=_("p"),N.textContent="Choose a boundary below or on the map to begin sketching:",x=g(),M=_("ul"),b.c(),ee=g(),te=_("hr"),le=g(),K=_("p"),K.textContent="Or continue with a previously opened file:",ne=g(),q=_("div");for(let f=0;f<p.length;f+=1)p[f].c();oe=g(),W=_("style"),W.textContent=`.group {
        border: 1px solid black;
        padding: 4px;
        margin-bottom: 8px;
        break-inside: avoid-column;
      }`,re=g(),J=_("div"),R=_("div"),D(L.$$.fragment),E(a,"type","radio"),a.__value="LAD",fe(a,a.__value),E(d,"type","radio"),d.__value="REGION",fe(d,d.__value),B(M,"columns","3"),B(q,"columns","2"),E(t,"class","pico left svelte-1suden8"),B(R,"position","relative"),B(R,"width","100%"),B(R,"height","100%"),E(J,"class","main svelte-1suden8"),B(e,"display","flex"),z.p(a,d)},m(f,v){w(f,e,v),c(e,t),c(t,n),c(t,l),c(t,i),c(i,o),c(o,a),a.checked=a.__value===r[3],c(o,s),c(i,u),c(i,j),c(j,d),d.checked=d.__value===r[3],c(j,U),c(t,C),c(t,N),c(t,x),c(t,M),S[m].m(M,null),c(t,ee),c(t,te),c(t,le),c(t,K),c(t,ne),c(t,q);for(let A=0;A<p.length;A+=1)p[A]&&p[A].m(q,null);c(t,oe),c(t,W),c(e,re),c(e,J),c(J,R),O(L,R,null),P=!0,Q||(ae=[_e(a,"change",r[4]),_e(d,"change",r[6])],Q=!0)},p(f,[v]){v&8&&(a.checked=a.__value===f[3]),v&8&&(d.checked=d.__value===f[3]);let A=m;if(m=se(f),m===A?S[m].p(f,v):(Y(),$(S[A],1,1,()=>{S[A]=null}),X(),b=S[m],b?b.p(f,v):(b=S[m]=ie[m](f),b.c()),h(b,1),b.m(M,null)),v&0){G=I(ve());let k;for(k=0;k<G.length;k+=1){const ue=pe(f,G,k);p[k]?p[k].p(ue,v):(p[k]=be(ue),p[k].c(),p[k].m(q,null))}for(;k<p.length;k+=1)p[k].d(1);p.length=G.length}const ce={};v&8388617&&(ce.$$scope={dirty:v,ctx:f}),L.$set(ce)},i(f){P||(h(b),h(L.$$.fragment,f),P=!0)},o(f){$(b),$(L.$$.fragment,f),P=!1},d(f){f&&y(e),S[m].d(),T(p,f),F(L),z.r(),Q=!1,Ne(ae)}}}function Qe(r){let e=r.detail.features[0].properties;V(`${e.kind}_${e.name}`)}function V(r){let e="";for(;;){if(e=window.prompt(`Please pick a project name to create in ${r}`,e)||"",e=="")return;let t=`ltn_cnt/${r}/${e}`;if(window.localStorage.getItem(t)!=null){window.alert(`The project name ${e} is already used; please pick another`);continue}window.localStorage.setItem(t,JSON.stringify({type:"FeatureCollection",features:[],study_area_name:r})),window.location.href=`index.html?project=${encodeURIComponent(t)}`;return}}function ve(){let r=new Map;for(let e=0;e<window.localStorage.length;e++){let t=window.localStorage.key(e);if(t.startsWith("ltn_cnt/"))try{let[n,l,i]=t.split("/");r.has(l)||r.set(l,[]),r.get(l).push(i)}catch{}}for(let e of r.values())e.sort();return r}function Ve(r,e,t){let n={type:"FeatureCollection",features:[]},l=[],i=[],o="LAD";De(async()=>{let C=await fetch(He);t(0,n=await C.json());for(let N of n.features)N.properties.kind=="LAD"?l.push(N.properties.name):i.push(N.properties.name);l.sort(),i.sort(),t(1,l),t(2,i)});const a=[[]];function s(){o=this.__value,t(3,o)}function u(){o=this.__value,t(3,o)}return[n,l,i,o,s,a,u,C=>V(`LAD_${C}`),C=>V(`REGION_${C}`),C=>{console.log(C.detail.error)}]}class Xe extends Ce{constructor(e){super(),je(this,e,Ve,ze,Le,{})}}new Xe({target:document.getElementById("app")});
